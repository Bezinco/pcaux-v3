<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PCAux â€” Competitive Auctions</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Supabase JS Client -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
:root {
  --text: #e5e7eb;
  --muted: #9ca3af;
  --accent: #c9a24d;
  --panel: #111827;
  --border: rgba(255,255,255,0.08);
  --shadow: rgba(0,0,0,0.25);
}

/* ===== RESET & WALLPAPER ===== */
* { box-sizing: border-box; margin:0; padding:0; }
html, body { width:100%; height:100%; font-family:system-ui,sans-serif; overflow-x:hidden; }

body {
  background:
    radial-gradient(1400px 700px at 15% 10%, rgba(90,160,255,0.4), transparent 60%),
    radial-gradient(1200px 900px at 85% 20%, rgba(255,200,100,0.35), transparent 65%),
    radial-gradient(1000px 800px at 50% 85%, rgba(120,200,255,0.25), transparent 70%),
    linear-gradient(180deg, #040812 0%, #0a1228 35%, #020617 100%);
  background-size:100% 100%;
  animation: backgroundDrift 25s ease-in-out infinite alternate;
  position:relative;
  z-index:0;
}
body::before {
  content:"";
  position:fixed; inset:0;
  background:
    repeating-linear-gradient(130deg, rgba(255,255,255,0.05) 0px, rgba(255,255,255,0.05) 2px, transparent 2px, transparent 8px),
    radial-gradient(circle at center, rgba(255,255,255,0.08), transparent 60%);
  background-size: 300px 300px, 100% 100%;
  mix-blend-mode: overlay;
  animation: energyFlow 12s linear infinite;
  z-index:0;
  pointer-events:none;
}
@keyframes backgroundDrift {
  0% { background-position: 15% 10%, 85% 20%, 50% 85%, center; }
  50% { background-position: 18% 15%, 82% 25%, 53% 80%, center; }
  100% { background-position: 15% 10%, 85% 20%, 50% 85%, center; }
}
@keyframes energyFlow {
  0% { background-position: 0 0, center; }
  50% { background-position: 300px 300px, center; }
  100% { background-position: 0 0, center; }
}

/* ===== CONTAINER & GLOBAL ===== */
.container { max-width:1200px; margin:0 auto; padding:40px 24px 96px; position:relative; z-index:1; }
body, h1,h2,h3,p,a { color:var(--text); text-shadow:1px 1px 0 #0a1228,2px 2px 0 rgba(0,0,0,0.25),3px 3px 2px rgba(0,0,0,0.4); }
a { text-decoration:none; color:inherit; }

/* ===== HEADER ===== */
.header { display:flex; justify-content:space-between; align-items:center; padding-bottom:24px; border-bottom:1px solid var(--border); }
.logo { font-weight:700; letter-spacing:0.04em; }
.nav a { margin-left:20px; font-size:14px; color:var(--muted); }
.nav a:hover { color:var(--text); }

/* ===== HERO ===== */
.hero { text-align:center; padding:96px 0 72px; }
.hero h1 { font-size:44px; line-height:1.15; margin-bottom:16px; }
.hero p { max-width:640px; margin:0 auto; font-size:18px; color:var(--muted); }
.accent { color:var(--accent); }

/* ===== 3D FRAMED PANELS ===== */
.product-frame, .card-panel, .auction-panel, .trust-item {
  background: linear-gradient(180deg, #0f2040 0%, var(--panel) 100%);
  border:2px solid var(--accent);
  border-radius:16px;
  padding:24px;
  box-shadow:0 12px 30px rgba(0,0,0,0.8), inset 0 0 8px rgba(255,255,255,0.05);
  transform: perspective(800px) rotateY(-7deg);
  transition: transform 0.4s ease, box-shadow 0.3s ease, border-color 0.2s ease;
  position: relative;
  overflow: hidden;
}
.product-frame::before, .card-panel::before, .auction-panel::before, .trust-item::before {
  content:""; position:absolute; top:-50%; left:-50%; width:200%; height:200%;
  background: linear-gradient(120deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.25) 50%, rgba(255,255,255,0.05) 100%);
  transform: rotate(45deg) translateX(-100%);
  pointer-events:none;
  transition: transform 0.6s ease;
}
.product-frame:hover, .card-panel:hover, .auction-panel:hover, .trust-item:hover {
  transform: perspective(800px) rotateY(0deg) scale(1.03);
  box-shadow:0 20px 35px rgba(0,0,0,0.85);
  border-color:var(--accent);
}
.product-frame:hover::before, .card-panel:hover::before, .auction-panel:hover::before, .trust-item:hover::before {
  transform: rotate(45deg) translateX(100%);
}

/* ===== GRID & PANEL LAYOUT ===== */
.auction-grid { display:grid; grid-template-columns:2fr 1fr; gap:24px; }
.card-image { height:260px; border-radius:12px; background:linear-gradient(135deg,#1f2937,#020617); display:flex; align-items:center; justify-content:center; color:var(--muted); font-size:14px; margin-bottom:16px; }
.meta { font-size:14px; color:var(--muted); line-height:1.6; }
.auction-panel h3 { margin-top:0; margin-bottom:12px; font-size:20px; }
.auction-panel p { font-size:14px; color:var(--muted); line-height:1.6; }
.cta { margin-top:24px; padding:14px; text-align:center; border-radius:8px; background: rgba(201,162,77,0.08); border:1px solid rgba(201,162,77,0.25); font-weight:600; color:var(--accent); cursor: pointer; transition: all 0.3s ease; }
.cta:hover { background: rgba(201,162,77,0.15); transform: translateY(-2px); }

/* ===== TRUST GRID ===== */
.trust { margin-top:64px; display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:24px; }

/* ===== FOOTER ===== */
footer { margin-top:96px; padding-top:32px; border-top:1px solid var(--border); font-size:13px; color:var(--muted); display:flex; justify-content:space-between; flex-wrap:wrap; gap:16px; }

/* ===== MODAL STYLES ===== */
.modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.85);
  z-index: 9999;
  justify-content: center;
  align-items: center;
  backdrop-filter: blur(8px);
}

.modal.show {
  display: flex !important;
}

.modal-content {
  background: linear-gradient(180deg, #1a2639 0%, #0f1420 100%);
  border: 2px solid var(--accent);
  border-radius: 16px;
  padding: 32px;
  max-width: 400px;
  width: 90%;
  position: relative;
  box-shadow: 0 25px 50px rgba(0,0,0,0.8);
  animation: modalSlideIn 0.3s ease;
  transform: none !important;
}

@keyframes modalSlideIn {
  from { transform: translateY(-50px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

.modal h2 {
  color: var(--accent);
  margin-bottom: 24px;
  font-size: 24px;
  text-align: center;
  text-shadow: none;
}

.form-group {
  margin-bottom: 20px;
}

.form-group label {
  display: block;
  margin-bottom: 8px;
  color: var(--muted);
  font-size: 14px;
  text-shadow: none;
}

.form-group input {
  width: 100%;
  padding: 14px;
  background: rgba(0, 0, 0, 0.5);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: var(--text);
  font-size: 16px;
  transition: all 0.3s ease;
}

.form-group input:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(201, 162, 77, 0.2);
}

.modal-buttons {
  display: flex;
  gap: 12px;
  margin-top: 24px;
}

.modal-buttons button {
  flex: 1;
  padding: 14px;
  border: none;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
}

.btn-primary {
  background: var(--accent);
  color: #000;
}

.btn-primary:hover:not(:disabled) {
  background: #dbb45c;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(201, 162, 77, 0.3);
}

.btn-primary:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn-secondary {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--muted);
}

.btn-secondary:hover {
  background: rgba(255,255,255,0.1);
  color: var(--text);
  border-color: var(--text);
}

.close-modal {
  position: absolute;
  top: 16px;
  right: 16px;
  color: var(--muted);
  font-size: 28px;
  cursor: pointer;
  transition: color 0.3s ease;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
}

.close-modal:hover {
  color: var(--accent);
  background: rgba(255,255,255,0.1);
}

.error-message {
  color: #ff6b6b;
  font-size: 14px;
  margin-top: 8px;
  display: none;
  text-align: center;
  padding: 8px;
  background: rgba(255, 107, 107, 0.1);
  border-radius: 6px;
}

.error-message.show {
  display: block;
}

.success-message {
  color: #51cf66;
  font-size: 14px;
  margin-top: 8px;
  display: none;
  text-align: center;
  padding: 8px;
  background: rgba(81, 207, 102, 0.1);
  border-radius: 6px;
}

.success-message.show {
  display: block;
}

.loading-spinner {
  display: none;
  width: 20px;
  height: 20px;
  border: 2px solid rgba(201, 162, 77, 0.3);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  margin: 0 auto;
}

.loading-spinner.show {
  display: block;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

body.modal-open {
  overflow: hidden;
}

.user-info {
  display: none;
  align-items: center;
  gap: 10px;
  color: var(--accent);
}

.user-info.show {
  display: flex;
}
</style>
</head>

<body>
<div class="container">

  <header class="header">
    <div class="logo">PCAux</div>
    <nav class="nav">
      <a href="#">How It Works</a>
      <a href="#">Auctions</a>
      <a href="#">Rules</a>
      <a href="#" id="login-btn">Sign In</a>
      <div class="user-info" id="user-info">
        <span id="user-email"></span>
        <a href="#" id="logout-btn" style="color: var(--muted); font-size: 12px;">(Logout)</a>
      </div>
    </nav>
  </header>

  <section class="hero">
    <h1>
      Competitive auctions.<br />
      <span class="accent">No published prices.</span>
    </h1>
    <p>
      PCAux is a live auction platform for collectible cards.
      Outcomes are determined by judgment, timing, and competition â€” nothing else.
    </p>
  </section>

  <!-- PRODUCT FRAMING -->
  <section class="product-frame">
    <div class="frame-header" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
      <div class="frame-title" style="font-weight:600; color:var(--accent);">Live Auction Environment</div>
      <div class="status" style="font-size:12px; color:var(--muted);">Auction in progress</div>
    </div>

    <div class="auction-grid">
      <div class="card-panel">
        <div class="card-image">Card image placeholder</div>
        <div class="meta">
          Physical collectible card<br />
          Owned and auctioned by PCAux<br />
          Grading status may change over time
        </div>
      </div>

      <div class="auction-panel">
        <div>
          <h3>Open Competitive Auction</h3>
          <p>
            PCAux does not set prices or values.
            All outcomes are determined exclusively
            by competitive bidding at close.
          </p>
        </div>
        <div class="cta">Participate in Auction</div>
      </div>
    </div>
  </section>

  <!-- TRUST / LEGAL SIGNALS -->
  <section class="trust">
    <div class="trust-item">PCAux is the seller of record for all items.</div>
    <div class="trust-item">Participation grants no ownership until auction close.</div>
    <div class="trust-item">No pricing, valuation, or investment guidance provided.</div>
    <div class="trust-item">Governed by Canadian law.</div>
  </section>

  <!-- FOOTER -->
  <footer>
    <div>Â© PCAux</div>
    <div>
      <a href="#">Legal</a> Â·
      <a href="#">Responsible Play</a> Â·
      <a href="#">Terms</a>
    </div>
  </footer>

</div>

<!-- LOGIN MODAL -->
<div class="modal" id="login-modal">
  <div class="modal-content">
    <span class="close-modal" id="close-modal">&times;</span>
    <h2>Sign In to PCAux</h2>
    
    <div class="form-group">
      <label for="email">Email</label>
      <input type="email" id="email" placeholder="your@email.com" autocomplete="email">
    </div>
    
    <div class="form-group">
      <label for="password">Password</label>
      <input type="password" id="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password">
    </div>
    
    <div class="error-message" id="error-message"></div>
    <div class="success-message" id="success-message">Login successful!</div>
    <div class="loading-spinner" id="loading-spinner"></div>
    
    <div class="modal-buttons">
      <button class="btn-secondary" id="cancel-btn">Cancel</button>
      <button class="btn-primary" id="login-submit">Sign In</button>
    </div>
  </div>
</div>

<!-- SUPABASE AUTH SCRIPT -->
<script>
// YOUR SUPABASE CREDENTIALS - ALREADY CONFIGURED
const SUPABASE_URL = 'https://knceschbzidmqvosdwud.supabase.co';
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtuY2VzY2hiemlkbXF2b3Nkd3VkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5NTY2MTgsImV4cCI6MjA4NjUzMjYxOH0.2lZXDSMAQwo4mD5y66-2d6kd6FXMvIFBmNbBgoSx56o';

// Create Supabase client
const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

document.addEventListener('DOMContentLoaded', async function() {
    console.log("âœ… DOM Loaded - Initializing Supabase Auth");
    
    // UI Elements
    const loginBtn = document.getElementById('login-btn');
    const logoutBtn = document.getElementById('logout-btn');
    const userInfo = document.getElementById('user-info');
    const userEmail = document.getElementById('user-email');
    const modal = document.getElementById('login-modal');
    const closeModalBtn = document.getElementById('close-modal');
    const cancelBtn = document.getElementById('cancel-btn');
    const loginSubmit = document.getElementById('login-submit');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const errorMessage = document.getElementById('error-message');
    const successMessage = document.getElementById('success-message');
    const loadingSpinner = document.getElementById('loading-spinner');
    
    // Check existing session
    const { data: { session }, error } = await supabase.auth.getSession();
    if (session) {
        showLoggedIn(session.user);
    }
    
    // Auth state listener
    supabase.auth.onAuthStateChange((event, session) => {
        if (event === 'SIGNED_IN' && session) {
            showLoggedIn(session.user);
            closeModal();
        } else if (event === 'SIGNED_OUT') {
            showLoggedOut();
        }
    });
    
    function showLoggedIn(user) {
        loginBtn.style.display = 'none';
        userInfo.classList.add('show');
        userEmail.textContent = user.email;
        console.log("âœ… Logged in as:", user.email);
    }
    
    function showLoggedOut() {
        loginBtn.style.display = 'block';
        userInfo.classList.remove('show');
        userEmail.textContent = '';
    }
    
    function openModal(e) {
        if (e) e.preventDefault();
        emailInput.value = '';
        passwordInput.value = '';
        hideMessages();
        modal.classList.add('show');
        document.body.classList.add('modal-open');
        setTimeout(() => emailInput.focus(), 100);
    }
    
    function closeModal() {
        modal.classList.remove('show');
        document.body.classList.remove('modal-open');
    }
    
    function hideMessages() {
        errorMessage.classList.remove('show');
        successMessage.classList.remove('show');
        loadingSpinner.classList.remove('show');
    }
    
    function showError(msg) {
        errorMessage.textContent = msg;
        errorMessage.classList.add('show');
        successMessage.classList.remove('show');
        loadingSpinner.classList.remove('show');
        loginSubmit.disabled = false;
        loginSubmit.textContent = 'Sign In';
    }
    
    function showSuccess() {
        successMessage.classList.add('show');
        errorMessage.classList.remove('show');
        loadingSpinner.classList.remove('show');
    }
    
    function setLoading(loading) {
        loginSubmit.disabled = loading;
        loginSubmit.textContent = loading ? 'Signing In...' : 'Sign In';
        if (loading) loadingSpinner.classList.add('show');
        else loadingSpinner.classList.remove('show');
    }
    
    async function handleLogin() {
        const email = emailInput.value.trim();
        const password = passwordInput.value;
        
        hideMessages();
        
        if (!email || !password) {
            showError("Please enter both email and password.");
            return;
        }
        
        setLoading(true);
        console.log("ðŸ” Attempting login for:", email);
        
        try {
            const { data, error } = await supabase.auth.signInWithPassword({
                email: email,
                password: password
            });
            
            if (error) {
                console.error("âŒ Login error:", error);
                showError(error.message === 'Invalid login credentials' 
                    ? 'Invalid email or password. Please try again.' 
                    : error.message);
            } else {
                console.log("âœ… Login successful:", data.user);
                showSuccess();
                setTimeout(() => {
                    closeModal();
                    showLoggedIn(data.user);
                }, 800);
            }
        } catch (err) {
            console.error("âŒ Unexpected error:", err);
            showError("An unexpected error occurred. Please try again.");
        } finally {
            setLoading(false);
        }
    }
    
    async function handleLogout(e) {
        e.preventDefault();
        const { error } = await supabase.auth.signOut();
        if (!error) {
            showLoggedOut();
        }
    }
    
    // Event Listeners
    loginBtn.addEventListener('click', openModal);
    logoutBtn.addEventListener('click', handleLogout);
    closeModalBtn.addEventListener('click', closeModal);
    cancelBtn.addEventListener('click', closeModal);
    loginSubmit.addEventListener('click', handleLogin);
    
    modal.addEventListener('click', function(e) {
        if (e.target === modal) closeModal();
    });
    
    [emailInput, passwordInput].forEach(input => {
        input.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') handleLogin();
        });
    });
    
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && modal.classList.contains('show')) {
            closeModal();
        }
    });
    
    console.log("âœ… Supabase Auth initialized");
});
</script>

</body>
</html>
