<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PCAux â€” Competitive Auctions</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
:root {
  --text: #e5e7eb;
  --muted: #9ca3af;
  --accent: #c9a24d;
  --panel: #111827;
  --border: rgba(255,255,255,0.08);
}

* { box-sizing: border-box; margin:0; padding:0; }
html, body { width:100%; height:100%; font-family:system-ui,sans-serif; overflow-x:hidden; }

body {
  background:
    radial-gradient(1400px 700px at 15% 10%, rgba(90,160,255,0.4), transparent 60%),
    radial-gradient(1200px 900px at 85% 20%, rgba(255,200,100,0.35), transparent 65%),
    radial-gradient(1000px 800px at 50% 85%, rgba(120,200,255,0.25), transparent 70%),
    linear-gradient(180deg, #040812 0%, #0a1228 35%, #020617 100%);
  position:relative;
}

.container { max-width:1200px; margin:0 auto; padding:40px 24px 96px; position:relative; z-index:1; }
body, h1,h2,h3,p,a { color:var(--text); text-shadow:1px 1px 0 #0a1228,2px 2px 0 rgba(0,0,0,0.25); }
a { text-decoration:none; }

.header { display:flex; justify-content:space-between; align-items:center; padding-bottom:24px; border-bottom:1px solid var(--border); }
.logo { font-weight:700; letter-spacing:0.04em; }
.nav a { margin-left:20px; font-size:14px; color:var(--muted); }
.nav a:hover { color:var(--text); }

.hero { text-align:center; padding:96px 0 72px; }
.hero h1 { font-size:44px; line-height:1.15; margin-bottom:16px; }
.accent { color:var(--accent); }

.product-frame, .card-panel, .auction-panel, .trust-item {
  background: linear-gradient(180deg, #0f2040 0%, var(--panel) 100%);
  border:2px solid var(--accent);
  border-radius:16px;
  padding:24px;
  transform: perspective(800px) rotateY(-7deg);
  transition: transform 0.4s ease;
}
.product-frame:hover, .card-panel:hover, .auction-panel:hover, .trust-item:hover {
  transform: perspective(800px) rotateY(0deg) scale(1.03);
}

.auction-grid { display:grid; grid-template-columns:2fr 1fr; gap:24px; }
.cta { margin-top:24px; padding:14px; text-align:center; border-radius:8px; background: rgba(201,162,77,0.08); border:1px solid rgba(201,162,77,0.25); font-weight:600; color:var(--accent); cursor:pointer; }

.trust { margin-top:64px; display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:24px; }

.modal {
  display: none;
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  background-color: rgba(0, 0, 0, 0.85);
  z-index: 9999;
  justify-content: center;
  align-items: center;
}
.modal.show { display: flex; }

.modal-content {
  background: linear-gradient(180deg, #1a2639 0%, #0f1420 100%);
  border: 2px solid var(--accent);
  border-radius: 16px;
  padding: 32px;
  max-width: 400px;
  width: 90%;
}

.modal h2 { color: var(--accent); margin-bottom: 24px; font-size: 24px; text-align: center; }
.form-group { margin-bottom: 20px; }
.form-group input { width: 100%; padding: 14px; background: rgba(0,0,0,0.5); border: 1px solid var(--border); border-radius: 8px; color: var(--text); font-size: 16px; }
.modal-buttons { display: flex; gap: 12px; margin-top: 24px; }
.modal-buttons button { flex: 1; padding: 14px; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; }
.btn-primary { background: var(--accent); color: #000; }
.btn-secondary { background: transparent; border: 1px solid var(--border); color: var(--muted); }

.error-message { color: #ff6b6b; font-size: 14px; margin-top: 8px; display: none; text-align: center; }
.error-message.show { display: block; }
.success-message { color: #51cf66; font-size: 14px; margin-top: 8px; display: none; text-align: center; }
.success-message.show { display: block; }

.user-info { display: none; align-items: center; gap: 10px; color: var(--accent); }
.user-info.show { display: flex; }
</style>
</head>

<body>
<div class="container">
  <header class="header">
    <div class="logo">PCAux</div>
    <nav class="nav">
      <a href="#">How It Works</a>
      <a href="#">Auctions</a>
      <a href="#">Rules</a>
      <a href="#" id="login-btn">Sign In</a>
      <div class="user-info" id="user-info">
        <span id="user-email"></span>
        <a href="#" id="logout-btn" style="color: var(--muted); font-size: 12px;">(Logout)</a>
      </div>
    </nav>
  </header>

  <section class="hero">
    <h1>Competitive auctions.<br /><span class="accent">No published prices.</span></h1>
    <p>PCAux is a live auction platform for collectible cards.</p>
  </section>

  <section class="product-frame">
    <div class="auction-grid">
      <div class="card-panel">
        <div style="height:260px; background:linear-gradient(135deg,#1f2937,#020617); display:flex; align-items:center; justify-content:center; color:var(--muted);">Card Image</div>
      </div>
      <div class="auction-panel">
        <h3>Open Competitive Auction</h3>
        <div class="cta">Participate in Auction</div>
      </div>
    </div>
  </section>

  <section class="trust">
    <div class="trust-item">PCAux is the seller of record for all items.</div>
    <div class="trust-item">No pricing guidance provided.</div>
    <div class="trust-item">Governed by Canadian law.</div>
  </section>
</div>

<div class="modal" id="login-modal">
  <div class="modal-content">
    <h2>Sign In to PCAux</h2>
    <div class="form-group">
      <input type="email" id="email" placeholder="Email" autocomplete="email">
    </div>
    <div class="form-group">
      <input type="password" id="password" placeholder="Password" autocomplete="current-password">
    </div>
    <div class="error-message" id="error-message"></div>
    <div class="success-message" id="success-message">Welcome back!</div>
    <div class="modal-buttons">
      <button class="btn-secondary" id="cancel-btn">Cancel</button>
      <button class="btn-primary" id="login-submit">Sign In</button>
    </div>
  </div>
</div>

<script>
const SUPABASE_URL = 'https://knceschbzidmqvosdwud.supabase.co';
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtuY2VzY2hiemlkbXF2b3Nkd3VkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5NTY2MTgsImV4cCI6MjA4NjUzMjYxOH0.2lZXDSMAQwo4mD5y66-2d6kd6FXMvIFBmNbBgoSx56o';

const { createClient } = supabase;
const supabaseClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

document.addEventListener('DOMContentLoaded', async function() {
  const loginBtn = document.getElementById('login-btn');
  const logoutBtn = document.getElementById('logout-btn');
  const userInfo = document.getElementById('user-info');
  const userEmail = document.getElementById('user-email');
  const modal = document.getElementById('login-modal');
  
  const { data: { session } } = await supabaseClient.auth.getSession();
  if (session) showLoggedIn(session.user);
  
  supabaseClient.auth.onAuthStateChange((event, session) => {
    if (event === 'SIGNED_IN' && session) showLoggedIn(session.user);
    if (event === 'SIGNED_OUT') showLoggedOut();
  });
  
  function showLoggedIn(user) {
    loginBtn.style.display = 'none';
    userInfo.classList.add('show');
    userEmail.textContent = user.email;
    modal.classList.remove('show');
  }
  
  function showLoggedOut() {
    loginBtn.style.display = 'block';
    userInfo.classList.remove('show');
  }
  
  loginBtn.onclick = (e) => { e.preventDefault(); modal.classList.add('show'); document.getElementById('email').focus(); };
  document.getElementById('close-modal')?.addEventListener('click', () => modal.classList.remove('show'));
  document.getElementById('cancel-btn').onclick = () => modal.classList.remove('show');
  
  document.getElementById('login-submit').onclick = async () => {
    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value;
    const errorMsg = document.getElementById('error-message');
    
    errorMsg.classList.remove('show');
    
    if (!email || !password) {
      errorMsg.textContent = 'Please enter email and password';
      errorMsg.classList.add('show');
      return;
    }
    
    const { data, error } = await supabaseClient.auth.signInWithPassword({ email, password });
    
    if (error) {
      errorMsg.textContent = error.message === 'Invalid login credentials' ? 'Invalid email or password' : error.message;
      errorMsg.classList.add('show');
    } else {
      document.getElementById('success-message').classList.add('show');
      setTimeout(() => showLoggedIn(data.user), 800);
    }
  };
  
  logoutBtn.onclick = async (e) => {
    e.preventDefault();
    await supabaseClient.auth.signOut();
    showLoggedOut();
  };
  
  modal.onclick = (e) => { if (e.target === modal) modal.classList.remove('show'); };
});
</script>
</body>
</html>
